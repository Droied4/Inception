# syntax=docker/dockerfile:1
ARG BASE_DIGEST
FROM alpine@sha256:${BASE_DIGEST}

ARG NGINX_PORT

ARG NGINX_SCRIPT
ARG NGINX_CONF

RUN 	apk update && \
	apk add --no-cache nginx && \
	mkdir -p /usr/share/nginx/html

COPY --chmod=644 ${NGINX_CONF}nginx.conf /etc/nginx/
COPY --chmod=744 ${NGINX_SCRIPT}nginx_entrypoint.sh /entrypoint.sh

RUN	echo "<html><body><h1>Hola, Nginx esta funcionando!</h1></body></html>" > /usr/share/nginx/html/index.html

EXPOSE ${NGINX_PORT}
ENTRYPOINT ["/entrypoint.sh"]
CMD ["nginx"]
